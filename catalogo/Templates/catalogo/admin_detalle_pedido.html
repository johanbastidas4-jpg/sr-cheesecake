{% extends "catalogo/base_panel.html" %}


{% block title %}Pedido #{{ pedido.id }} | Panel Admin{% endblock %}

{% block content %}
<div class="container my-4">
    <h3 class="mb-3">Pedido #{{ pedido.id }}</h3>

    <p><strong>Cliente:</strong> {{ pedido.nombre_cliente }}</p>
    <p><strong>Teléfono:</strong> {{ pedido.telefono }}</p>
    <p><strong>Dirección:</strong> {{ pedido.direccion }}</p>
    <p><strong>Fecha:</strong> {{ pedido.creado_en|date:"d/m/Y H:i" }}</p>
    <p><strong>Método de pago:</strong> {{ pedido.metodo_pago }}</p>
    
    
    <form method="post" class="mt-3">
    {% csrf_token %}
    <label class="form-label">Estado del pedido</label>
    <select name="estado" class="form-select mb-3">
        <option value="pendiente" {% if pedido.estado == "pendiente" %}selected{% endif %}>Pendiente</option>
        <option value="cancelado" {% if pedido.estado == "cancelado" %}selected{% endif %}>Cancelado</option>
        <option value="entregado" {% if pedido.estado == "entregado" %}selected{% endif %}>Entregado</option>
    </select>

    <button class="btn btn-primary">Actualizar estado</button>
    </form>

    <hr>

    <h4>Productos</h4>
    <ul class="list-group mb-3">
        {% for d in detalles %}
        <li class="list-group-item d-flex justify-content-between">
            {{ d.producto.nombre }} (x{{ d.cantidad }})
            <span>${{ d.subtotal }} COP</span>
        </li>
        {% endfor %}
    </ul>

    <p><strong>Total:</strong> ${{ pedido.total}} COP</p>

    <a href="{% url 'admin_pedidos' %}" class="btn btn-light-custom">Volver a pedidos</a>
</div>
{% endblock %}
